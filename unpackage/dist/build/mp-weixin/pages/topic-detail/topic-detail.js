(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/topic-detail/topic-detail"],{"0527":function(t,n,i){"use strict";i.r(n);var o=i("55d2"),e=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(n,t,(function(){return o[t]}))}(s);n["default"]=e.a},1241:function(t,n,i){},"50b8":function(t,n,i){"use strict";(function(t){i("2be1");o(i("66fd"));var n=o(i("9839"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,i("543d")["createPage"])},"55d2":function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){i.e("components/post-list/post-list").then(function(){return resolve(i("de0e"))}.bind(null,i)).catch(i.oe)},e=function(){i.e("components/discuss-list/discuss-list").then(function(){return resolve(i("901e"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/user-list/user-list").then(function(){return resolve(i("5b71"))}.bind(null,i)).catch(i.oe)},u={components:{postList:o,disList:e,userList:s},data:function(){return{current:0,tabList:[{name:"最新"},{name:"最热"},{name:"话题"},{name:"圈友"}],noticeShow:!1,btnStyle:{marginRight:0,width:"150rpx",fontSize:"12px",height:"60rpx",lineHeight:"60rpx"},topicId:0,topicInfo:{member_list:[],discuss_list:[]},postHot:[],postNews:[],loadStatus:"loading",page1:1,page2:1,background:{backgroundColor:"unset"}}},onLoad:function(t){this.topicId=t.id},onShow:function(){this.page1=1,this.page2=1,this.postHot=[],this.postNews=[],this.getTopicInfo(),this.getPostList()},onReachBottom:function(){0==this.current&&this.page1++,1==this.current&&this.page2++,this.getPostList()},onPullDownRefresh:function(){0==this.current&&(this.page1=1,this.postNews=[]),1==this.current&&(this.page2=1,this.postHot=[]),this.getPostList(),t.stopPullDownRefresh()},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:this.topicInfo.topic_name+"-"+this.topicInfo.description,path:"/pages/topic-detail/topic-detail?id="+this.topicId,imageUrl:this.topicInfo.bg_image}},onShareTimeline:function(){return{title:this.topicInfo.topic_name+"-"+this.topicInfo.description,imageUrl:this.topicInfo.bg_image,query:"id="+this.topicId}},filters:{substr:function(t){return t.substr(0,5)}},methods:{onBack:function(){t.reLaunch({url:"/pages/index/index"})},tabsChange:function(t){this.current=t},onTrigger:function(){this.topicInfo.is_join?t.navigateTo({url:"/pages/plus-post/plus-post?topic_id="+this.topicId+"&topic_name="+this.topicInfo.topic_name}):this.$u.toast("请先加入圈子")},jump:function(n){t.navigateTo({url:"/pages/ucenter/ucenter?uid="+n})},joinTopic:function(){var t=this;this.$H.post("topic/joinTopic",{id:this.topicId}).then((function(n){200===n.code&&(t.topicInfo.is_join=!0)}))},outTopic:function(){var t=this;this.$H.post("topic/userTopicDel",{id:this.topicId}).then((function(n){200===n.code&&(t.topicInfo.is_join=!1)}))},getTopicInfo:function(){var t=this;this.$H.get("topic/detail",{id:this.topicId}).then((function(n){t.topicInfo=n.result}))},jumpAddDis:function(){t.navigateTo({url:"/pages/discuss-add/discuss-add?topicId="+this.topicId})},getPostList:function(){var t=this;this.loadStatus="loading";var n=this.page1,i="id desc";1==this.current&&(n=this.page2,i="read_count desc"),this.$H.get("post/list",{topic_id:this.topicId,page:n,order:i}).then((function(n){0==t.current&&(t.postNews=t.postNews.concat(n.result.data)),1==t.current&&(t.postHot=t.postHot.concat(n.result.data)),n.result.current_page===n.result.last_page||0===n.result.last_page?t.loadStatus="nomore":t.loadStatus="loadmore"}))}}};n.default=u}).call(this,i("543d")["default"])},"84c6":function(t,n,i){"use strict";var o=i("afe4"),e=i.n(o);e.a},9839:function(t,n,i){"use strict";i.r(n);var o=i("dc1e"),e=i("0527");for(var s in e)"default"!==s&&function(t){i.d(n,t,(function(){return e[t]}))}(s);i("a873"),i("84c6");var u,c=i("f0c5"),r=Object(c["a"])(e["default"],o["b"],o["c"],!1,null,"711925ff",null,!1,o["a"],u);n["default"]=r.exports},a873:function(t,n,i){"use strict";var o=i("1241"),e=i.n(o);e.a},afe4:function(t,n,i){},dc1e:function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return s})),i.d(n,"a",(function(){return o}));var o={uNavbar:function(){return i.e("uview-ui/components/u-navbar/u-navbar").then(i.bind(null,"ec70"))},uButton:function(){return i.e("uview-ui/components/u-button/u-button").then(i.bind(null,"a28a"))},uIcon:function(){return i.e("uview-ui/components/u-icon/u-icon").then(i.bind(null,"7e78"))},uPopup:function(){return i.e("uview-ui/components/u-popup/u-popup").then(i.bind(null,"4ed5"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"14de"))},postList:function(){return i.e("components/post-list/post-list").then(i.bind(null,"de0e"))},userList:function(){return i.e("components/user-list/user-list").then(i.bind(null,"5b71"))}},e=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.noticeShow=!0})},s=[]}},[["50b8","common/runtime","common/vendor"]]]);