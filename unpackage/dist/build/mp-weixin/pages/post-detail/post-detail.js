(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/post-detail/post-detail"],{3199:function(t,e,i){"use strict";i.r(e);var o=i("500e"),n=i("e04a");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("bc7e");var a,u=i("f0c5"),c=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=c.exports},"500e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={uButton:function(){return i.e("uview-ui/components/u-button/u-button").then(i.bind(null,"a28a"))},uEmpty:function(){return i.e("uview-ui/components/u-empty/u-empty").then(i.bind(null,"967f"))},uToast:function(){return i.e("uview-ui/components/u-toast/u-toast").then(i.bind(null,"9044"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t._f("timeFrom")(t.postDetail.create_time)),o=t.postDetail.comment_list.data.length>0?t.__map(t.postDetail.comment_list.data,(function(e,i){var o=t.__get_orig(e),n=t._f("timeFrom")(e.create_time);return{$orig:o,f1:n}})):null;t.$mp.data=Object.assign({},{$root:{f0:i,l0:o}})},s=[]},"9e06":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{unitId:this.$c.postDetailAd,postId:0,postDetail:{comment:[],media:[],comment_list:{data:[]}},cTxt:"",isSubmitD:!1}},onLoad:function(t){this.postId=t.id,this.getPostDetail(),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:function(t){var e;return"button"===t.from&&console.log(t.target),this.postDetail.media.length>0&&(e=this.postDetail.media[0]),{title:this.postDetail.content,path:"/pages/post-detail/post-detail?id="+this.postId,imageUrl:e}},onShareTimeline:function(){var t=t=this.postDetail.media[0];return{title:this.postDetail.content,imageUrl:t,query:"id="+this.postId}},methods:{addComment:function(){var t=this;if(this.isSubmitD=!0,""==this.cTxt)return this.$u.toast("评论不能为空"),void(this.isSubmitD=!1);var e=this.utf16toEntities(this.cTxt);this.$H.post("post/addComment",{content:e,uid:this.postDetail.uid,post_id:this.postId}).then((function(e){200==e.code&&(t.cTxt="",t.$u.toast("评论成功"),t.getPostDetail()),t.isSubmitD=!1}))},utf16toEntities:function(t){var e=/[\ud800-\udbff][\udc00-\udfff]/g;return t.replace(e,(function(t){var e,i,o;return 2===t.length?(e=t.charCodeAt(0),i=t.charCodeAt(1),o=1024*(e-55296)+65536+i-56320,"&#"+o+";"):t}))},entitiesToUtf16:function(t){return t.replace(/&#(\d+);/g,(function(t,e){var i=Math.floor((e-65536)/1024)+55296,o=Math.floor(e-65536)%1024+56320;return String.fromCharCode(i,o)}))},getPostDetail:function(){var t=this;this.$H.get("post/detail",{id:this.postId}).then((function(e){e.result.comment_list.data.forEach((function(e){e.content=t.entitiesToUtf16(e.content)})),t.postDetail=e.result}))},cancelCollection:function(){var t=this;this.$H.post("post/cancelCollection",{id:this.postId}).then((function(e){200===e.code&&(t.postDetail.is_collection=!1)}))},addCollection:function(){var t=this;this.$H.post("post/addCollection",{id:this.postId,uid:this.postDetail.uid}).then((function(e){200===e.code&&(t.postDetail.is_collection=!0)}))},addThumb:function(){var t=this;this.$H.post("post/addThumb",{id:this.postId}).then((function(e){200===e.code&&(t.postDetail.is_thumb=!0)}))},cancelThumb:function(){var t=this;this.$H.post("post/cancelThumb",{id:this.postId,uid:this.postDetail.uid}).then((function(e){200===e.code&&(t.postDetail.is_thumb=!1)}))},follow:function(){var t=this;this.$H.post("user/addFollow",{id:this.postDetail.uid}).then((function(e){200===e.code?t.postDetail.is_follow=!0:t.$refs.uToast.show({title:e.msg,type:"error"})}))},cancelFollow:function(){var t=this;this.$H.post("user/cancelFollow",{id:this.postDetail.uid}).then((function(e){200===e.code&&(t.postDetail.is_follow=!1)}))},previewImage:function(e){t.previewImage({current:e.currentTarget.dataset.current,urls:e.currentTarget.dataset.image})},jumpTopic:function(e){t.navigateTo({url:"/pages/topic-detail/topic-detail?id="+e})}}};e.default=i}).call(this,i("543d")["default"])},a897:function(t,e,i){},bc7e:function(t,e,i){"use strict";var o=i("a897"),n=i.n(o);n.a},cab8:function(t,e,i){"use strict";(function(t){i("2be1");o(i("66fd"));var e=o(i("3199"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e04a:function(t,e,i){"use strict";i.r(e);var o=i("9e06"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a}},[["cab8","common/runtime","common/vendor"]]]);