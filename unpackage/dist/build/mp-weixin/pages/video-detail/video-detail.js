(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/video-detail/video-detail"],{"36eb":function(t,e,n){"use strict";n.r(e);var i=n("8871"),o=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);e["default"]=o.a},"62c6":function(t,e,n){"use strict";n.r(e);var i=n("8728"),o=n("36eb");for(var u in o)"default"!==u&&function(t){n.d(e,t,(function(){return o[t]}))}(u);n("9a9f");var a,s=n("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"f8823b96",null,!1,i["a"],a);e["default"]=r.exports},8728:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return i}));var i={uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"a28a"))}},o=function(){var t=this,e=t.$createElement;t._self._c},u=[]},8871:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{postDetail:{},postId:"",cTxt:"",isSubmitD:!1,danmuList:[]}},onLoad:function(t){this.postId=t.id,this.getPostDetail()},methods:{addComment:function(){var t=this;if(this.isSubmitD=!0,""==this.cTxt)return this.$u.toast("评论不能为空"),void(this.isSubmitD=!1);var e=this.utf16toEntities(this.cTxt);this.$H.post("post/addComment",{content:e,uid:this.postDetail.uid,post_id:this.postId}).then((function(e){200==e.code&&(t.cTxt="",t.$u.toast("评论成功"),t.getPostDetail()),t.isSubmitD=!1}))},utf16toEntities:function(t){var e=/[\ud800-\udbff][\udc00-\udfff]/g;return t.replace(e,(function(t){var e,n,i;return 2===t.length?(e=t.charCodeAt(0),n=t.charCodeAt(1),i=1024*(e-55296)+65536+n-56320,"&#"+i+";"):t}))},entitiesToUtf16:function(t){return t.replace(/&#(\d+);/g,(function(t,e){var n=Math.floor((e-65536)/1024)+55296,i=Math.floor(e-65536)%1024+56320;return String.fromCharCode(n,i)}))},getPostDetail:function(){var t=this;this.$H.get("post/detail",{id:this.postId}).then((function(e){var n=[];e.result.comment_list.data.forEach((function(e,i){e.content=t.entitiesToUtf16(e.content);var o={text:e.content,color:"#fff",time:i+5};n.push(o)})),t.danmuList=n,t.postDetail=e.result}))}},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),this.postDetail.media.length>0&&this.postDetail.media[0],{title:this.postDetail.content,path:"/pages/video-detail/video-detail?id="+this.postId}},onShareTimeline:function(){this.postDetail.media[0];return{title:this.postDetail.content,query:"id="+this.postId}}};e.default=i},"9a9f":function(t,e,n){"use strict";var i=n("a487"),o=n.n(i);o.a},a487:function(t,e,n){},cbfa:function(t,e,n){"use strict";(function(t){n("2be1");i(n("66fd"));var e=i(n("62c6"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["cbfa","common/runtime","common/vendor"]]]);